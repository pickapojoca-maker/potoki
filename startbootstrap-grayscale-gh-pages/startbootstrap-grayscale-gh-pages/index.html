<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <meta name="description" content="" />
    <meta name="author" content="" />
    <title>Imperializem</title>
    <link rel="icon" type="image/x-icon" href="assets/favicon.ico" />
    <!-- Font Awesome icons (free version)-->
    <script src="https://use.fontawesome.com/releases/v6.3.0/js/all.js" crossorigin="anonymous"></script>
    <!-- Google fonts-->
    <link href="https://fonts.googleapis.com/css?family=Varela+Round" rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css?family=Nunito:200,200i,300,300i,400,400i,600,600i,700,700i,800,800i,900,900i" rel="stylesheet" />
    <!-- Core theme CSS (includes Bootstrap)-->
    <link href="css/styles.css" rel="stylesheet" />
    <!-- Leaflet CSS (za karto) -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"/>
    <style>
      /* Višina in širina zemljevida znotraj About sekcije */
      #map { height: 500px; width: 100%; }
.legend-box{
  background:#ffffff; padding:10px 12px; border-radius:8px;
  box-shadow:0 2px 10px rgba(0,0,0,.08);
  font:14px/1.3 system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
}
.legend-item{ display:flex; align-items:center; gap:8px; }
.legend-dot{
  width:12px; height:12px; border-radius:50%;
  background:#c92a2a;           /* enaka barva kot markerji */
  border:1px solid #7c1d1d;
  display:inline-block;
}
        .navbar-audio .form-range { padding: 0; margin: 0; }
  .navbar-audio .btn { line-height: 1; }
   .leaflet-tooltip { font-size: 12px; padding: 4px 6px; }
    </style>
  </head>
  <body id="page-top">
    <!-- Navigation-->
    <nav class="navbar navbar-expand-lg navbar-light fixed-top" id="mainNav">
      <div class="container px-4 px-lg-5">
        <a class="navbar-brand" href="#page-top">Imperializem</a>
        <button class="navbar-toggler navbar-toggler-right" type="button" data-bs-toggle="collapse" data-bs-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
          Menu
          <i class="fas fa-bars"></i>
        </button>
        <div class="collapse navbar-collapse" id="navbarResponsive">
<li class="nav-item d-flex align-items-center gap-2 navbar-audio ms-lg-3 mt-2 mt-lg-0">
  <!-- play / pause -->
  <button id="audioToggle" class="btn btn-sm btn-outline-primary" type="button" aria-label="Predvajaj/ustavi" title="Predvajaj/ustavi">
    <i class="fas fa-play"></i>
  </button>

  <!-- ZAČNI ZNOVA -->
  <button id="audioRestart" class="btn btn-sm btn-outline-secondary" type="button" aria-label="Začni znova" title="Začni znova">
    <i class="fas fa-rotate-left"></i>
  </button>

  <!-- glasnost (skrito na xs) -->
  <input id="audioVol" class="form-range d-none d-md-block" type="range"
         min="0" max="1" step="0.01" value="0.5" style="width:130px;">
</li>
          <ul class="navbar-nav ms-auto">
            <li class="nav-item"><a class="nav-link" href="#about">Zemljevid</a></li>
            <li class="nav-item"><a class="nav-link" href="#projects">About</a></li>
            <li class="nav-item"><a class="nav-link" href="https://bezimerch.printify.me/">Shop</a></li>
          </ul>
        </div>
      </div>
    </nav>
    <!-- Masthead-->
    <header class="masthead">
      <div class="container px-4 px-lg-5 d-flex h-100 align-items-center justify-content-center">
        <div class="d-flex justify-content-center">
          <div class="text-center">
            <h1 class="mx-auto my-0 text-uppercase">Gejko Squad</h1>
            <h2 class="text-white-50 mx-auto mt-2 mb-5">Spletna stran za učenje zgodovine. MAJKEMI!</h2>
            <a class="btn btn-primary" href="#about">Upali</a>
          </div>
        </div>
      </div>
    </header>
    <!-- About-->
    <section class="about-section text-center" id="about">
      <div class="container px-4 px-lg-5">
        <div class="row gx-4 gx-lg-5 justify-content-center">
          <div class="col-lg-8">
            <h2 class="text-white mb-4">Glavne bitke imperializma (1850–1914)</h2>
            <p class="text-white-50">Interaktivni zemljevid najpomembnejših bitk.</p>
          </div>
        </div>
        <!-- KARTA -->
        <div id="map" aria-label="Zemljevid bitk imperializma"></div>

<!-- LEGENDA + RESET -->
<div class="legend-box d-flex flex-column flex-md-row align-items-start align-items-md-center justify-content-between gap-2 mt-2">
  <div class="d-flex align-items-center gap-3 flex-wrap">
    <div class="legend-item">
      <span class="legend-dot"></span>
      Ključni dogodki: bitke, obleganja, krize (1850–1914)
    </div>
  </div>
  <button id="resetView" class="btn btn-sm btn-outline-primary">
    PRIKAŽI VSE BITKE
  </button>
</div>
    </section>
    <!-- Projects-->
    <section class="projects-section bg-light" id="projects">
      <div class="container px-4 px-lg-5">
        <div class="row gx-2 mb-3 mb-lg-0"><h1 style="text-align: center;">Avtorji</h1></div>
        <br>
        <br>
        <!-- Featured Project Row-->
        <div class="row gx-0 mb-4 mb-lg-5 align-items-center">
          <div class="col-xl-8 col-lg-7"><img class="img-fluid mb-3 mb-lg-0" src="assets/img/tosko.jpg" alt="..." /></div>
          <div class="col-xl-4 col-lg-5">
            <div class="featured-text text-center text-lg-left">
              <h4>Svit Tošič</h4>
              <p class="text-black-50 mb-0">Svit Tošič je predsednik razreda, ki skrbi za dobro organizacijo in povezuje sošolce pri projektih. Poznan je po svoji zavzetosti za enakopravnost in spoštovanje vseh kultur. Rad sodeluje pri prostovoljnih dejavnostih in se zavzema za vključujoče okolje.</p>
            </div>
          </div>
        </div>
        <!-- Project One Row-->
        <div class="row gx-0 mb-5 mb-lg-0 justify-content-center">
          <div class="col-lg-6"><img class="img-fluid" src="assets/img/Pero.jpg" alt="..." /></div>
          <div class="col-lg-6">
            <div class="bg-black text-center h-100 project">
              <div class="d-flex h-100">
                <div class="project-text w-100 my-auto text-center text-lg-left">
                  <h4 class="text-white">Pero Martin</h4>
                  <p class="mb-0 text-white-50">Pero Martin je navdušen biolog in znan po svoji energiji ter sproščenem humorju. V razredu ga mnogi poznajo kot »gaserja« – vedno pripravljen dvigniti vzdušje in pomagati sošolcem. Poleg zanimanja za naravoslovje rad raziskuje naravo in prenaša svoje znanje na druge.</p>
                </div>
              </div>
            </div>
          </div>
        </div>
        <!-- Project Two Row-->
        <div class="row gx-0 justify-content-center">
          <div class="col-lg-6"><img class="img-fluid" src="assets/img/Brane3.jpg" alt="..." /></div>
          <div class="col-lg-6 order-lg-first">
            <div class="bg-black text-center h-100 project">
              <div class="d-flex h-100">
                <div class="project-text w-100 my-auto text-center text-lg-right">
                  <h4 class="text-white">Krstić Jr.</h4>
                  <p class="mb-0 text-white-50">Krstić Jr. prihaja iz multikulturnega okolja in razredu prinaša svež pogled na svet. Je navdušenec nad informatiko, vedno pripravljen pomagati pri tehničnih vprašanjih in raziskovati nove tehnologije. S svojo odprtostjo in znanjem povezuje sošolce ter spodbuja medsebojno razumevanje.</p>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="row gx-0 mb-5 mb-lg-0 justify-content-center">
          <div class="col-lg-6"><img class="img-fluid" src="assets/img/jigga.jpg" alt="..." /></div>
          <div class="col-lg-6">
            <div class="bg-black text-center h-100 project">
              <div class="d-flex h-100">
                <div class="project-text w-100 my-auto text-center text-lg-left">
                  <h4 class="text-white">Jigga</h4>
                  <p class="mb-0 text-white-50">Jigga je dijak temnejše polti, ki obiskuje program mednarodne mature. Poznan je po svoji ambicioznosti in širokih interesih, med katerimi izstopa ljubezen do avtomobilov – še posebej znamke Mercedes. S svojo odprtostjo in zavzetostjo prispeva k raznolikosti in pozitivnemu vzdušju v razredu.</p>
                </div>
              </div>
            </div>
          </div>
        </div>
        <!-- Project Two Row-->
        <div class="row gx-0 justify-content-center">
          <div class="col-lg-6"><img class="img-fluid" src="assets/img/bor1.jpg" alt="..." /></div>
          <div class="col-lg-6 order-lg-first">
            <div class="bg-black text-center h-100 project">
              <div class="d-flex h-100">
                <div class="project-text w-100 my-auto text-center text-lg-right">
                  <h4 class="text-white">Borči</h4>
                  <p class="mb-0 text-white-50">Borči (na levi) prihaja iz Škofje Loke in je velik navdušenec nad informatiko. Skupaj s Krstićem Jr. pogosto sodeluje pri praktičnih projektih – celo pri polaganju ploščic – kar kaže na njegovo vsestranskost in pripravljenost učiti se novih spretnosti. V razredu je znan po svoji zagnanosti in dobri volji.</p>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="row gx-0 mb-5 mb-lg-0 justify-content-center">
          <div class="col-lg-6"><img class="img-fluid" src="assets/img/ažb.jpg" alt="..." /></div>
          <div class="col-lg-6">
            <div class="bg-black text-center h-100 project">
              <div class="d-flex h-100">
                <div class="project-text w-100 my-auto text-center text-lg-left">
                  <h4 class="text-white">Ažbejčk</h4>
                  <p class="mb-0 text-white-50">Ažbejčk je znan po svojem prepoznavnem stilu – kratkih zavihanih modrih kavbojkah – ter svoji domačnosti, saj prihaja iz Trzina. Je odprt in družaben, njegova najboljša prijateljica je Julija, prav tako iz Trzina. Skupaj pogosto sodelujeta pri projektih in ustvarjata prijetno vzdušje v razredu.</p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>
    <!-- Signup-->
    <section class="signup-section" id="signup">
      <div class="container px-4 px-lg-5">
        <div class="row gx-4 gx-lg-5">
          <div class="col-md-10 col-lg-8 mx-auto text-center">
            <i class="far fa-paper-plane fa-2x mb-2 text-white"></i>
            <h2 class="text-white mb-5">Subscribe to receive updates!</h2>
            <form class="form-signup" id="contactForm" data-sb-form-api-token="API_TOKEN">
              <div class="row input-group-newsletter">
                <div class="col"><input class="form-control" id="emailAddress" type="email" placeholder="Enter email address..." aria-label="Enter email address..." data-sb-validations="required,email" /></div>
                <div class="col-auto"><button class="btn btn-primary disabled" id="submitButton" type="submit">Notify Me!</button></div>
              </div>
              <div class="invalid-feedback mt-2" data-sb-feedback="emailAddress:required">An email is required.</div>
              <div class="invalid-feedback mt-2" data-sb-feedback="emailAddress:email">Email is not valid.</div>
              <div class="d-none" id="submitSuccessMessage">
                <div class="text-center mb-3 mt-2 text-white">
                  <div class="fw-bolder">Form submission successful!</div>
                  To activate this form, sign up at
                  <br />
                  <a href="https://startbootstrap.com/solution/contact-forms">https://startbootstrap.com/solution/contact-forms</a>
                </div>
              </div>
              <div class="d-none" id="submitErrorMessage"><div class="text-center text-danger mb-3 mt-2">Error sending message!</div></div>
            </form>
          </div>
        </div>
      </div>
    </section>
    <!-- Contact-->
    <section class="contact-section bg-black">
      <div class="container px-4 px-lg-5">
        <div class="row gx-4 gx-lg-5">
          <div class="col-md-4 mb-3 mb-md-0">
            <div class="card py-4 h-100">
              <div class="card-body text-center">
                <i class="fas fa-map-marked-alt text-primary mb-2"></i>
                <h4 class="text-uppercase m-0">Address</h4>
                <hr class="my-4 mx-auto" />
                <div class="small text-black-50">Ćevabdžinica Željo, Kundurdžiluk, Sarajevo, Bosnia and Herzegovina</div>
              </div>
            </div>
          </div>
          <div class="col-md-4 mb-3 mb-md-0">
            <div class="card py-4 h-100">
              <div class="card-body text-center">
                <i class="fas fa-envelope text-primary mb-2"></i>
                <h4 class="text-uppercase m-0">Email</h4>
                <hr class="my-4 mx-auto" />
                <div class="small text-black-50"><a href="#!">jure.volk@dijaki.gimb.org</a></div>
              </div>
            </div>
          </div>
          <div class="col-md-4 mb-3 mb-md-0">
            <div class="card py-4 h-100">
              <div class="card-body text-center">
                <i class="fas fa-mobile-alt text-primary mb-2"></i>
                <h4 class="text-uppercase m-0">Phone</h4>
                <hr class="my-4 mx-auto" />
                <div class="small text-black-50">116111</div>
              </div>
            </div>
          </div>
        </div>
        <div class="social d-flex justify-content-center">
          <a class="mx-2" href="#!"><i class="fab fa-twitter"></i></a>
          <a class="mx-2" href="#!"><i class="fab fa-facebook-f"></i></a>
          <a class="mx-2" href="#!"><i class="fab fa-github"></i></a>
        </div>
      </div>
    </section>
    <!-- Footer-->
    <footer class="footer bg-black small text-center text-white-50">
      <div class="container px-4 px-lg-5">Copyright &copy; Your Website 2025</div>
    </footer>

    <!-- Bootstrap core JS-->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Core theme JS-->
    <script src="js/scripts.js"></script>
    <!-- Leaflet JS -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<!-- Leaflet JS -->
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

<script>
  window.addEventListener('load', function () {
    const map = L.map('map', { worldCopyJump: true });


    L.tileLayer('https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png', {
      maxZoom: 8,
      attribution: '&copy; OpenStreetMap, &copy; CartoDB'
    }).addTo(map);

    // Marker stil
    const style = {
      radius: 8,
      fillColor: '#c92a2a',
      color: '#7c1d1d',
      weight: 1,
      opacity: 1,
      fillOpacity: 0.92
    };


    const battles = {
      "type": "FeatureCollection",
      "features": [
        // --- Afrika / Bližnji vzhod ---
        {"type":"Feature","properties":{
          "id":"omdurman",
          "title":"Bitka pri Omdurmanu",
          "date":"1898",
          "place":"Omdurman, Sudan",
          "full":"Anglo-egiptovska vojska pod Kitchenerjem je s strojnicami in topništvom razbila mahdistično vojsko ter utrdila britanski nadzor nad Sudanom.",
          "short":"Britanci razbijejo mahdistično vojsko in utrdijo nadzor nad Sudanom (1898).",
          "link":"battle.html?id=omdurman"
        },"geometry":{"type":"Point","coordinates":[32.48,15.617]}},

        {"type":"Feature","properties":{
          "id":"tel-el-kebir",
          "title":"Bitka pri Tel el-Kebirju",
          "date":"1882",
          "place":"Egipt",
          "full":"Britanci z zoraškim napadom razbijejo Arabi Paševo vojsko in si zagotovijo nadzor nad Sueškim prekopom.",
          "short":"VB si z zmago pri Tel el-Kebirju zagotovi Sueški prekop (1882).",
          "link":"battle.html?id=tel-el-kebir"
        },"geometry":{"type":"Point","coordinates":[31.62,30.71]}},

        // --- Južna Afrika ---
        {"type":"Feature","properties":{
          "id":"isandlwana",
          "title":"Bitka pri Isandlwani",
          "date":"1879",
          "place":"KwaZulu-Natal, Južna Afrika",
          "full":"Britanski tabor brez utrdb je presenetila zulujska vojska in povzročila enega najhujših britanskih porazov proti avtohtonemu nasprotniku v Afriki.",
          "short":"Zulujska zmaga nad Britanci (1879).",
          "link":"battle.html?id=isandlwana"
        },"geometry":{"type":"Point","coordinates":[30.661,-28.357]}},

        {"type":"Feature","properties":{
          "id":"spion-kop",
          "title":"Bitka pri Spion Kopu",
          "date":"1900",
          "place":"KwaZulu-Natal, Južna Afrika",
          "full":"Težak teren, megla in zmeda v poveljstvu vodijo v britanski poraz proti Burom v drugi burski vojni.",
          "short":"Burska taktična zmaga pri Spion Kopu (1900).",
          "link":"battle.html?id=spion-kop"
        },"geometry":{"type":"Point","coordinates":[29.51,-28.75]}},

        // --- Krimska vojna ---
        {"type":"Feature","properties":{
          "id":"sevastopol",
          "title":"Obleganje Sevastopola",
          "date":"1854–1855",
          "place":"Sevastopol, Krim",
          "full":"Ena odločilnih epizod krimske vojne: po letu dni obleganja in zavzetju Malakova so se branilci predali; konec vojne je bil neizbežen.",
          "short":"Leto dni obleganja; padec Malakova prinese rusko vdajo (1855).",
          "link":"battle.html?id=sevastopol"
        },"geometry":{"type":"Point","coordinates":[33.525,44.617]}},

        // --- Francosko-pruska vojna ---
        {"type":"Feature","properties":{
          "id":"sedan",
          "title":"Bitka pri Sedanu",
          "date":"1870",
          "place":"Sedan, Francija",
          "full":"Prusi obkolijo francosko vojsko pod Napoleonom III.; po neuspelih prebojih cesar kapitulira, vojska je zajeta.",
          "short":"Napoleon III. se preda; odločilni preobrat vojne (1870).",
          "link":"battle.html?id=sedan"
        },"geometry":{"type":"Point","coordinates":[4.95,49.70]}},

        {"type":"Feature","properties":{
          "id":"obleganje-pariza",
          "title":"Obleganje Pariza",
          "date":"1870–1871",
          "place":"Pariz, Francija",
          "full":"Po Sedanu Prusi obkolijo Pariz; kljub več poskusom preboja lakota primora mesto k vdaji; Francija izgubi Alzacijo in del Lorene.",
          "short":"Pariz po lakoti kapitulira; izguba Alzacije in dela Lorene (1871).",
          "link":"battle.html?id=obleganje-pariza"
        },"geometry":{"type":"Point","coordinates":[2.3522,48.8566]}},

        // --- Vzhodna Azija / Kitajska ---
        {"type":"Feature","properties":{
          "id":"tsushima",
          "title":"Bitka pri Tsushimi",
          "date":"1905",
          "place":"Tsushima, Japonska",
          "full":"Admiral Tōgō uniči rusko baltsko floto; prelomna pomorska zmaga Japonske.",
          "short":"Japonska uniči rusko floto (1905).",
          "link":"battle.html?id=rusko-japonska-vojna"
        },"geometry":{"type":"Point","coordinates":[129.2,34.37]}},

        {"type":"Feature","properties":{
          "id":"mukden",
          "title":"Bitka pri Mukdenu",
          "date":"1905",
          "place":"Shenyang (Mukden), Kitajska",
          "full":"Ena največjih kopenskih bitk pred I. sv. vojno; ruski poraz utrdi japonsko pobudo.",
          "short":"Velika japonska kopenska zmaga (1905).",
          "link":"battle.html?id=rusko-japonska-vojna"
        },"geometry":{"type":"Point","coordinates":[123.43,41.8]}},

        {"type":"Feature","properties":{
          "id":"boksarska-vstaja",
          "title":"Boksarska vstaja – obleganje Pekinga",
          "date":"1900",
          "place":"Peking, Kitajska",
          "full":"Uporniki obkolijo diplomatsko četrt; koalicija osmih držav razbije obleganje in Kitajska podpiše strog Boksarski protokol.",
          "short":"Obleganje veleposlaništev; koalicija zatre upor (1900–1901).",
          "link":"battle.html?id=boksarska-vstaja"
        },"geometry":{"type":"Point","coordinates":[116.4074,39.9042]}},

        // --- Rusko-japonska vojna (splošni marker) ---
        {"type":"Feature","properties":{
          "id":"rusko-japonska-vojna",
          "title":"Rusko-japonska vojna",
          "date":"1904–1905",
          "place":"Port Arthur / Mandžurija / Koreja",
          "full":"Japonska brez napovedi udari po Port Arturju, zmaga pri Mukdnu in Tsushimi; mir v Portsmouthu potrdi japonski vzpon, ruski poraz sproži revolucijo 1905.",
          "short":"Japonska premaga Rusijo; Portsmouth potrdi njeno moč (1904–1905).",
          "link":"battle.html?id=rusko-japonska-vojna"
        },"geometry":{"type":"Point","coordinates":[121.24,38.81]}},

        // --- Amerika in Pacifik ---
        {"type":"Feature","properties":{
          "id":"san-juan-hill",
          "title":"Bitka pri San Juan Hillu",
          "date":"1898",
          "place":"Santiago de Cuba, Kuba",
          "full":"ZDA zavzamejo višave pri Santiagu; ključ do padca mesta v špansko-ameriški vojni.",
          "short":"ZDA osvojijo odločilne višave (1898).",
          "link":"battle.html?id=amerisko-spanska-vojna"
        },"geometry":{"type":"Point","coordinates":[-75.8,20.017]}},

        {"type":"Feature","properties":{
          "id":"manila-bay",
          "title":"Bitka v Manilskem zalivu",
          "date":"1898",
          "place":"Manila, Filipini",
          "full":"Admiral Dewey uniči špansko pacifiško floto; začetek ameriškega nadzora nad Filipini.",
          "short":"Deweyjeva odločilna pomorska zmaga (1898).",
          "link":"battle.html?id=amerisko-spanska-vojna"
        },"geometry":{"type":"Point","coordinates":[120.95,14.55]}},

        {"type":"Feature","properties":{
          "id":"havana",
          "title":"Ameriško-španska vojna (Kuba)",
          "date":"1898",
          "place":"Havana, Kuba",
          "full":"Po eksploziji ladje Maine in ameriški intervenciji vojna hitro zlomi špansko oblast na Kubi.",
          "short":"Kratek spopad; Španija izgubi Kubo in kolonije (1898).",
          "link":"battle.html?id=amerisko-spanska-vojna"
        },"geometry":{"type":"Point","coordinates":[-82.3666,23.1136]}},

        // --- Balkan / Severna Afrika / Srednja Evropa ---
        {"type":"Feature","properties":{
          "id":"balkanski-vojni",
          "title":"Prva in druga balkanska vojna",
          "date":"1912–1913",
          "place":"Makedonija (Skopje) – simbolni položaj",
          "full":"Zlom osmanske oblasti v Evropi in krvava delitev Makedonije; Srbija skoraj podvoji ozemlje in okrepi ambicije.",
          "short":"Razpad osmanske oblasti v Evropi; spori za Makedonijo (1912–1913).",
          "link":"battle.html?id=balkanski-vojni"
        },"geometry":{"type":"Point","coordinates":[21.43,41.997]}},

        {"type":"Feature","properties":{
          "id":"aneksija-bih",
          "title":"Aneksija Bosne in Hercegovine",
          "date":"1908–1909",
          "place":"Sarajevo, BiH",
          "full":"Avstro-Ogrska razglasi priključitev; bosanska kriza močno napne odnose velesil in podžge srbsko sovraštvo.",
          "short":"Bosanska kriza; ponižanje Srbije in Rusije (1908–1909).",
          "link":"battle.html?id=aneksija-bih"
        },"geometry":{"type":"Point","coordinates":[18.4131,43.8563]}},

        {"type":"Feature","properties":{
          "id":"maroska-kriza",
          "title":"Druga maroška kriza",
          "date":"1905–1911",
          "place":"Agadir, Maroko",
          "full":"Nemški »panterjev skok« v Agadir in francoska zasedba Fesa poglobita napetosti; antanta se okrepi, tekma v oboroževanju pospeši.",
          "short":"Agadir 1911: Nemčija ostane osamljena, antanta okrepi položaj.",
          "link":"battle.html?id=druga-maroska-kriza"
        },"geometry":{"type":"Point","coordinates":[-9.5981,30.4202]}},

        {"type":"Feature","properties":{
          "id":"burska-vojna",
          "title":"Burska vojna",
          "date":"1899–1902",
          "place":"Pretoria, Južna Afrika (simbolno)",
          "full":"Od obleganj do gverile; britanska taktika požgane zemlje in taborišča zlomijo burski odpor.",
          "short":"Britanci zlomijo bursko gverilo; mirovni sporazum v Vereeniginu (1902).",
          "link":"battle.html?id=burska-vojna"
        },"geometry":{"type":"Point","coordinates":[28.188,-25.746]}},

        {"type":"Feature","properties":{
          "id":"sedemtedenska",
          "title":"Bitka pri Kraljevem Gradcu (Sedemtedenska vojna)",
          "date":"1866",
          "place":"Hradec Králové, Češka",
          "full":"Moltke s tremi armadami in boljšim orožjem odločno porazi Avstrijo; ključna stopnica k Nemškemu cesarstvu.",
          "short":"Pruska zmaga pri Kraljevem Gradcu (1866).",
          "link":"battle.html?id=sedemtedenska-vojna"
        },"geometry":{"type":"Point","coordinates":[15.83,50.21]}}
      ]
    };

    // Popup gradnik z gumboma
function escapeAttr(s){
  return String(s||'').replace(/[&<>"']/g, c => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;'}[c]));
}

function popupHtml(p) {
  const title = p.title || 'Dogodek';
  const date  = p.date  || '';
  const text  = p.short || p.full || '';
  const link  = p.link  || '#';

  return `
    <div class="popup">
      <h5 style="margin:0 0 4px;">${title}</h5>
      <div class="text-muted" style="font-size:12px;">${p.place || ''} ${date ? ' • ' + date : ''}</div>

      <div class="mt-2">${text}</div>

      <div class="mt-2">
        <a class="btn btn-sm btn-primary"
           href="${link}"
           title="${escapeAttr(title)} • ${escapeAttr(date)}"
           aria-label="Prikaži več o: ${escapeAttr(title)} (${escapeAttr(date)})">
          PRIKAŽI VEČ
        </a>
      </div>
    </div>`;
}
const layer = L.geoJSON(battles, {
  pointToLayer: (f, latlng) => L.circleMarker(latlng, style),
  onEachFeature: (f, l) => {
    const p = f.properties || {};
    l.bindPopup(popupHtml(p), { maxWidth: 420 });

    // Tooltip na HOVER nad markerjem (naziv + letnica)
    const tip = `${p.title || 'Dogodek'}${p.date ? ' • ' + p.date : ''}`;
    l.bindTooltip(tip, { direction: 'top', sticky: true, opacity: 0.9 });
  }
}).addTo(map);

    const bounds = layer.getBounds();
    map.fitBounds(bounds, { padding: [25, 25] });
    setTimeout(() => map.invalidateSize(), 300);
    const resetBtn = document.getElementById('resetView');
if (resetBtn) {
  resetBtn.addEventListener('click', () => {
    map.closePopup();
    map.fitBounds(bounds, { padding: [25, 25] });
  });
}
  });
</script>

    <!-- * * SB Forms JS * *-->
    <script src="https://cdn.startbootstrap.com/sb-forms-latest.js"></script>
<audio id="bgm" preload="auto" loop>
  <source src="assets/audio/MIKIČ - NAJJAČI SI (Official Video).mp3" type="audio/mpeg">
  <source src="assets/audio/MIKIČ - NAJJAČI SI (Official Video).ogg" type="audio/ogg">
</audio>
<script>
document.addEventListener('DOMContentLoaded', function () {
  const bgm        = document.getElementById('bgm');
  const toggleBtn  = document.getElementById('audioToggle');
  const restartBtn = document.getElementById('audioRestart');
  const vol        = document.getElementById('audioVol');

  function setPlayUI(isPlaying) {
    if (!toggleBtn) return;
    if (isPlaying) {
      toggleBtn.innerHTML = '<i class="fa-solid fa-pause"></i>';
      toggleBtn.classList.remove('btn-outline-primary');
      toggleBtn.classList.add('btn-primary');
    } else {
      toggleBtn.innerHTML = '<i class="fa-solid fa-play"></i>';
      toggleBtn.classList.add('btn-outline-primary');
      toggleBtn.classList.remove('btn-primary');
    }
  }

  // varnostni check – če kaj manjka, ne delamo naprej
  if (!bgm || !toggleBtn || !restartBtn || !vol) {
    console.error('Audio kontrole niso pravilno vgrajene (manjka element ali ID).');
    return;
  }

vol.value = '0.1';        
bgm.volume = 0.1;

  // Play/Pause
  toggleBtn.addEventListener('click', async () => {
    try {
      if (bgm.paused) {
        await bgm.play();
        setPlayUI(true);
      } else {
        bgm.pause();
        setPlayUI(false);
      }
    } catch (e) {
      console.warn('Predvajanje blokirano ali napaka:', e);
    }
  });

  restartBtn.addEventListener('click', async () => {
    try {
      bgm.currentTime = 0;
      await bgm.play();
      setPlayUI(true);
    } catch (e) {
      console.warn('Predvajanje blokirano ali napaka:', e);
    }
  });


  vol.addEventListener('input', (e) => {
    bgm.volume = parseFloat(e.target.value || '0.1');
  });
});
</script>
  </body>
</html>